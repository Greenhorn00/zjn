import{s as E}from"./index-580b5310.js";import{d as F,u as L,y as $,r as o,o as i,c,e as n,F as j,a as q,b as C,z as m,f as h,n as N,s as P,x as R,_ as V}from"./index-c3a0b86b.js";const H=u=>(P("data-v-216307e9"),u=u(),R(),u),J={class:"body-bg"},O={class:"landingpage"},Y=H(()=>n("div",{class:"c-archive-header__container"},[n("h1",{class:"c-archive-header__title"},"为您呈现搜索内容"),n("div",{class:"c-archive-header__desc"})],-1)),G={class:"article-container"},K={class:"article-item article-item--list","data-post-id":"1568802",style:{"border-radius":"10px","background-color":"#1F1D2B"}},Q={class:"article-image cover-image"},U=["onClick"],W=["onClick"],X={class:"article-info js-transform"},Z=["onClick"],ee={class:"article-summary"},te={class:"article-meta","data-post-id":"1568802"},ae={style:{color:"#bdbdbd","font-size":"13px"}},se={key:1,style:{color:"#bdbdbd","font-size":"48px","text-align":"center","margin-top":"10%"}},le={key:2,style:{color:"#bdbdbd","font-size":"48px","text-align":"center","margin-top":"10%"}},ne=F({__name:"search_page",setup(u){const k=L(),M=$();function S(e){var s=new Date(e*1e3);let l=s.getFullYear(),a=s.getMonth()+1;a=a<10?"0"+a:a;let t=s.getDate();t=t<10?"0"+t:t;let r=s.getHours();r=r<10?"0"+r:r;let d=s.getMinutes();d=d<10?"0"+d:d;let _=s.getSeconds();return _=_<10?"0"+_:_,l+"-"+a+"-"+t+" "+r+":"+d+":"+_}function D(e){e=S(parseInt(e));let s=Date.parse(e)/1e3,a=new Date().getTime()/1e3-s,t="";if(a<60)return t="刚刚",t;if(a<3600)return t=parseInt((a/60).toString())+"分钟前",t;if(a<86400)return t=parseInt((a/3600).toString())+"小时前",t;if(a<172800)return t="昨天"+e.substring(10,16),t;if(a<259200)return t="前天 "+e.substring(10,16),t;if(a<31536e3)return t=e.substring(5,16),t;if(a>31536e3)return t=e,t}let g=o([]),f=o(0),y=o(0),x=o(!1);const b=o(1),T=o(15),z=async e=>{const s="/news/search/",l=await E.get(s,{params:{search:e,page:b.value,size:T.value}});if(g.value=JSON.parse(l.data.data),g.value.forEach(a=>{a.fields.created_at=D(a.fields.created_at)}),f=g.value.length,f!=y)y=f;else{v.value=!1,p.value=!1,x.value=!0;return}console.log(f),v.value=!0,p.value=!1,b.value++},w=(e,s)=>{console.log(s),k.push({path:"/Article_details",query:{post_category:s,post_id:e}})};function I(){let e=M.query.search;console.log(e),z(e)}I();const p=o(!1),v=o(!0),A=()=>{v.value=!1,p.value=!0,setTimeout(()=>{console.log("ok了"),console.log(b.value),I()},700)},B=e=>{e==="早报"?e="DailyMorning":e==="公司"?e="technology":e==="董车会"?e="car":e==="玩物志"?e="playthings":e==="人物"?e="person":e==="产品"?e="products":e==="生活"?e="life":e="DailyMorning",console.log(e),k.push({path:"/post_category",query:{post_category:e}})};return(e,s)=>(i(),c("div",J,[n("div",O,[Y,(i(!0),c(j,null,q(C(g),(l,a)=>(i(),c("div",{class:"nft",key:a},[n("div",G,[n("div",K,[n("div",Q,[n("a",{class:"article-label",target:"_blank","ga-bind":"click","ga-category":"MainPage_List","ga-action":"ToItemArticle","ga-label":"Article",onClick:t=>B(l.fields.original_category)},h(l.fields.post_category),9,U),n("a",{"ga-bind":"click","ga-category":"MainPage_List","ga-action":"ToItemArticle","ga-label":"Article",class:"article-link cover-block",target:"_blank",onClick:t=>w(l.fields.post_id,l.fields.post_category),style:N({"background-image":"url("+l.fields.post_cover_image+")"})},null,12,W)]),n("div",X,[n("h3",null,[n("a",{class:"js-title-transform","ga-bind":"click","ga-category":"MainPage_List","ga-action":"ToItemArticle","ga-label":"Article",onClick:t=>w(l.fields.post_id,l.fields.post_category),target:"_blank"},h(l.fields.post_title),9,Z)]),n("div",ee,h(l.fields.post_excerpt),1),n("div",te,[n("span",ae,h(l.fields.created_at),1)])])])])]))),128)),v.value?(i(),c("button",{key:0,class:"discover-loadbtn",onClick:s[0]||(s[0]=l=>A()),style:{color:"#bdbdbd","text-align":"center","":"50%"}},"查看更多")):m("",!0),p.value?(i(),c("p",se,"玩命加载中...")):m("",!0),C(x)?(i(),c("p",le,"客官，没有更多喽...")):m("",!0)])]))}});const ce=V(ne,[["__scopeId","data-v-216307e9"]]);export{ce as default};
